<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{.Title}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117;
            color: #f0f6fc;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 8px;
        }

        .version {
            background: #21262d;
            color: #58a6ff;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.875rem;
            border: 1px solid #30363d;
            margin-left: 12px;
        }

        .subtitle {
            color: #7d8590;
            font-size: 1.125rem;
            margin-top: 8px;
        }

        .status {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status.online {
            border-color: #2ea043;
        }

        .status.error {
            border-color: #da3633;
        }

        .status-icon {
            width: 20px;
            height: 20px;
        }

        .status.online .status-icon {
            color: #3fb950;
        }

        .status.error .status-icon {
            color: #f85149;
        }

        .status-text {
            font-weight: 500;
            font-size: 1rem;
        }

        .main {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-bottom: 40px;
        }

        .card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 24px;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #21262d;
        }

        .card-icon {
            width: 20px;
            height: 20px;
            color: #58a6ff;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #f0f6fc;
        }

        .endpoints {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .endpoint {
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 16px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 16px;
        }

        .method {
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .method.get {
            background: #033a16;
            color: #3fb950;
            border: 1px solid #2ea043;
        }

        .method.post {
            background: #1f2937;
            color: #a5b4fc;
            border: 1px solid #6366f1;
        }

        .method.head {
            background: #422006;
            color: #fbbf24;
            border: 1px solid #f59e0b;
        }

        .path {
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 0.875rem;
            color: #e6edf3;
            background: #21262d;
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid #30363d;
        }

        .description {
            font-size: 0.875rem;
            color: #7d8590;
            text-align: right;
        }

        .auth {
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .auth-icon {
            width: 24px;
            height: 24px;
            color: #58a6ff;
        }

        .auth-text {
            font-weight: 500;
            color: #f0f6fc;
        }

        .footer {
            text-align: center;
            padding-top: 24px;
            border-top: 1px solid #21262d;
            color: #7d8590;
            font-size: 0.875rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 16px;
            }

            .title {
                font-size: 2rem;
            }

            .main {
                gap: 20px;
            }

            .endpoint {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .description {
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">
                {{.Title}}
                <span class="version">{{.Version}}</span>
            </h1>
            <p class="subtitle">Secure HTTP Proxy Server</p>
        </header>

        <div class="status" id="status">
            <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                <path d="M21 3v5h-5"/>
                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                <path d="M3 21v-5h5"/>
            </svg>
            <span class="status-text">Checking proxy status...</span>
        </div>

        <main class="main">
            <div class="card">
                <div class="card-header">
                    <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    <h2 class="card-title">API Endpoints</h2>
                </div>

                <div class="endpoints">
                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/</code>
                        <span class="description">Landing page with server information</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/v0/health</code>
                        <span class="description">Health check endpoint</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/v0/stats</code>
                        <span class="description">Real-time bandwidth monitoring (requires auth)</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/v0/proxy</code>
                        <span class="description">Create proxy links (simple mode)</span>
                    </div>

                    <div class="endpoint">
                        <span class="method post">POST</span>
                        <code class="path">/v0/proxy</code>
                        <span class="description">Create proxy links (advanced mode)</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/v0/proxy/{token}</code>
                        <span class="description">Access proxied content via JWT token</span>
                    </div>

                    <div class="endpoint">
                        <span class="method head">HEAD</span>
                        <code class="path">/v0/proxy/{token}</code>
                        <span class="description">Get headers without downloading content</span>
                    </div>

                    <div class="endpoint">
                        <span class="method get">GET</span>
                        <code class="path">/v0/proxy/{token}/{filename}</code>
                        <span class="description">Access proxied content with custom filename</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <circle cx="12" cy="16" r="1"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <h2 class="card-title">Authentication</h2>
                </div>

                <div class="auth">
                    <svg class="auth-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    <div class="auth-text">
                        Basic Auth required for all operations
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>StremThru Proxy • Secure • Fast • Reliable</p>
        </footer>
    </div>

    <script>
        function updateStatus() {
            fetch('/v0/health')
                .then(response => response.json())
                .then(data => {
                    const status = document.getElementById('status');
                    if (data.data && data.data.status === 'ok') {
                        status.className = 'status online';
                        status.innerHTML = `
                            <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                            <span class="status-text">Proxy is online and ready</span>
                        `;
                    } else {
                        status.className = 'status error';
                        status.innerHTML = `
                            <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="15" y1="9" x2="9" y2="15"/>
                                <line x1="9" y1="9" x2="15" y2="15"/>
                            </svg>
                            <span class="status-text">Proxy service error</span>
                        `;
                    }
                })
                .catch(() => {
                    const status = document.getElementById('status');
                    status.className = 'status error';
                    status.innerHTML = `
                        <svg class="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/>
                            <line x1="12" y1="2" x2="12" y2="12"/>
                        </svg>
                        <span class="status-text">Connection failed</span>
                    `;
                });
        }

        updateStatus();
        setInterval(updateStatus, 30000);
    </script>
</body>
</html>
